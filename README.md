# v-1  

这个玩意就是只有最基础的**用户功能**，其他的什么都没有，嘻嘻嘻，这样子先定下用户，然后那个后面就不要大规模添加用户之类的数据库了，避免像之前一样大规模改动

# v-1.2
这部分，我实现了那个用户个人**api-key**的增删改查功能，并给出相关的页面,像是那个聊天页面，我还要想办法完善，还没办法搞定它，所以这次我就先不把那个聊天页面给出来

# v-2
这部分，我调整了那个很多地方的代码，例如原先写的关于那个LLM_Chat功能的后端代码，就全部改了；然后，我的这部分代码没什么创新，就是原本项目的代码加上那个用户系统

我个人认为，这个小玩意可以很好的锻炼我个人写go语言的能力了...相比于python，还真的是有很多不一样

# v-3

这个，我添加了一个小型的**Note笔记本**功能，包含了基本的增删改查的功能

# v-3.2

这个，我更改了以往的几个问题：

-  全局变量滥用： GlobalUserService、GlobalChatService、GlobalLLMSession 等全局变量满天飞,使得单元测试困难（无法 mock 依赖）
-  错误处理粗糙： 很多地方直接 log.Fatal 一了百了，我后面返回错误让上层决定如何处理，而不是直接杀进程。
-  那个笔记功能的那个index.html当中忘记加上去的按钮

# v-3.3

这个，我改进了以下几个问题：

**数据库事务处理不足** 
比如删除会话时需要同时删除消息（ChatService.goL176-L194），如果中间步骤失败可能导致数据不一致，应该用事务包裹。
- User_service.go的 ResetPassword 方法：用 GORM 的事务包裹这三个操作，要么全成功，要么全回滚。
- Note_Service.go的 UpdateNote 方法：我感觉不需要先查询笔记是否存在，直接带条件更新就行。如果笔记不存在，RowsAffected 会是 0
- ChatService.go的 SaveChatMessage：核心操作用事务，非关键操作允许失败，我这样子修改的理由：消息 + 计数：强一致性，因为 message_count 是核心统计数据  //  标题更新：最终一致性，因为标题只是展示优化，失败了用户也能用  //  性能和一致性平衡：事务范围最小化，只保护关键数据

**配置硬编码**
main.goL22 里 localhost:6379 直接写死，虽然我用了 Config.InitConfig()，但 Redis 配置应该也走配置文件。
